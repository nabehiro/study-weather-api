<html>

<body>
  <h1>sample</h1>
  
  <p>
    livedoor お天気 API を使用している。<br/>
    http://weather.livedoor.com/weather_hacks/webservice <br/>
    <br/>
    形式: JSONP<br/>
    パラメータ: city(livedoor API パラメータ city の値), callback(コールバック関数名)<br/>
    <br/>
    [呼び出しサンプルURL] https://study-weather-api.azurewebsites.net/api/livedoor-weather?city=130010&callback=hogehoge<br/>
  </p>


  <button id="getButton">天気を取得</button>
  <pre id="preview"></pre>

  <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
  <script>
    // 以下のコードは jQuery で JSONP API を呼び出しています。
    // 慣れてきたら jQuery を使わない呼び出しも試してみるといいかと思います。
    $('#getButton').click(function () {
      $.ajax({
        url: 'https://study-weather-api.azurewebsites.net/api/livedoor-weather',
        jsonp: 'callback',
        dataType: 'jsonp',
        data: {
          city: '130010', //東京都。livedoor API の city パラメータを設定
          //full: true    //livedoor API のレスポンスをそのまま使いたいときはコメントを外してください
        },
        success: function (response) {
          // API の結果を取得したときの処理を記載します。
          console.log(response);
          $('#preview').text(JSON.stringify(response));
        }
      });
    })
  </script>

</body>

</html>
